# Упражнение 12

<div align="center">
	<img src="https://upload.wikimedia.org/wikipedia/commons/a/a7/Chess_board_blank.svg" height="384px" />
</div>

### Задача:

Целта ни е да разработим програма за игра на шах съгласно принципите на _ООП_: енкапсулация, абстракция, наследяване и полиморфизъм.

### Въпроси:

1. Как подхождате към един такъв проблем? Откъде започвате?

2. На какви _"стъпки"_ (лесно менажируеми под-проблеми) разбивате проблема?
Как решавате кога сте приключили с една стъпка и можете да преминете към следващата? Как преценявате в какъв ред трябва да се изпълнят стъпките и по кои стъпки може да се работи едновременно?

3. Какво правите, за да _"хващате"_ грешките си максимално рано и да имате увереност, че кодът ви работи както очаквате?

### Стъпки:

1. Основни класове и обекти:
	- Разгледайте класовете `Position` и `Board`, които енкапсулират концепциите за позиция и състояние на една шахматна дъска.
	- Създайте абстрактен клас `Figure` (фигура) с общите свойства и методи за всички фигури в играта.
	- Създайте класове за всички видове фигури в играта: пешка (`Pawn`), кон (`Knight`), офицер (`Bishop`), топ (`Rook`), царица (`Queen`) и цар (`King`), които наследяват класа `Figure`.
	- Създайте клас `Game` (игра), който пази текущото състояние на играта, контролира реда на играчите и проверява валидността на техните ходове.

2. Правила и ходове:
	<div align="center">
		<img src="https://elzr.com/blag/img/2018/chess-pieces/chess-moves.png" height="512px"/>
	</div>

	- Добавете чиста виртуална функция `isValidMove` в класа `Figure`, която проверява дали даден ход е валиден.
	- Добавете метод за извършване на ход в класа `Game`, който да проверява дали даден ход е валиден според правилата на шаха и ако е, да обновява състоянието на дъската.
	- Имплементирайте метода `isValidMove` в наследниците на `Figure`. Започнете с простите случаи, без да се задълбочавате в по-сложните правила като [произвеждане](https://bg.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%B5%D0%B6%D0%B4%D0%B0%D0%BD%D0%B5), [_ан пасан_](https://bg.wikipedia.org/wiki/%D0%9F%D0%B5%D1%88%D0%BA%D0%B0) или [рокада](https://bg.wikipedia.org/wiki/%D0%A0%D0%BE%D0%BA%D0%B0%D0%B4%D0%B0).

3. **[Бонус/Домашно]** Допълнителни функционалности:
	- Предефинирайте оператора `<<` така че да може да отпечатва състоянието на една шахматна дъска.
	- Реализирайте функционалност за запазване и зареждане на една игра във/от файл.
	- Добавете методи за проверка на състояния като _шах_, _мат_ и _пат_ в класа `Game`.
	- Имплементирайте по-сложните случаи като произвеждане, _ан пасан_ и рокада, които пропуснахме в точка 2.
	- Реализирайте `main` функция, която да позволява да се играе една партия шах от конзолата. За целта `main` функцията трябва да включва следните три стъпки:
		- Прочита от терминала следващия ход във формат на [алгебрична шахматна нотация](https://www.chesshouse.com/blogs/education/how-to-read-and-write-algebraic-chess-notation)
		- Играе хода и отпечатва новото състояние на играта ако той е валиден или съобщение за грешка ако не е.
		- Продължава така, докато играта не завърши с победа (мат) на единия от двамта играчи или с техническо реми (_пат_, тройно повторение на дадена позиция или 50 хода без да е взета фигура).
	- Tествайте програмата, върху реални игри на шах с различни сценарии. Уверете се, че всички правила и възможности са коректно имплементирани.
